<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>挪威冬日旅程 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f0f4f8; }
        [v-cloak] { display: none; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* 日系極簡卡片陰影 */
        .card-shadow { box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        
        /* 黑色選中卡片樣式 (參考截圖) */
        .active-card { background-color: #000000 !important; color: #ffffff !important; }
        .active-card .text-zinc-400 { color: rgba(255,255,255,0.5) !important; }
        .active-card .icon-bg { background-color: rgba(255,255,255,0.2) !important; }
        .active-card .text-zinc-500 { color: rgba(255,255,255,0.7) !important; }

        /* 頁首圓弧銜接 */
        .content-up { border-top-left-radius: 32px; border-top-right-radius: 32px; }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <!-- 頁首 Banner (使用你提供的挪威峽灣圖) -->
        <header class="relative h-[250px] w-full overflow-hidden">
            <!-- 這裡的路徑設為 ./banner.jpg，請務必將圖片上傳到 GitHub 同一目錄 -->
            <img src="./banner.jpg" 
                 class="w-full h-full object-cover" alt="Norway Fjord">
            <div class="absolute inset-0 bg-black/10"></div>
            
            <!-- 浮動 Tab 按鈕 (導航) -->
            <div class="absolute bottom-12 right-4 flex gap-2">
                <button v-for="tab in tabs" :key="tab.id" 
                    @click="currentTab = tab.id"
                    :class="['p-3 rounded-full transition-all duration-300 shadow-xl backdrop-blur-md', 
                             currentTab === tab.id ? 'bg-[#0c4a6e] text-white scale-110' : 'bg-white/80 text-[#0c4a6e]']">
                    <i :data-lucide="tab.icon" class="w-5 h-5"></i>
                </button>
            </div>
        </header>

        <!-- 主內容區域 -->
        <main class="relative -mt-8 px-4 pb-32">
            <div class="bg-[#f0f4f8] content-up pt-6 min-h-screen">
                
                <!-- 分頁 1: 每日行程表 -->
                <section v-if="currentTab === 'itinerary'" class="px-2">
                    <!-- 頂部導航欄 (截圖風格) -->
                    <div class="flex items-center justify-between mb-4 px-2">
                        <div class="flex items-center gap-3">
                            <div class="bg-white p-3 rounded-2xl border border-zinc-200 shadow-sm">
                                <i data-lucide="calendar" class="w-6 h-6 text-zinc-600"></i>
                            </div>
                            <div>
                                <div class="text-[10px] text-zinc-400 font-black uppercase tracking-widest">{{ currentDay.dateLabel }}</div>
                                <div class="text-xl font-black text-zinc-800">{{ currentDay.title }}</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button @click="prevDay" class="p-2 bg-white rounded-full border border-zinc-200 active:bg-zinc-100 shadow-sm"><i data-lucide="chevron-left" class="w-6 h-6"></i></button>
                            <button @click="nextDay" class="p-2 bg-white rounded-full border border-zinc-200 active:bg-zinc-100 shadow-sm"><i data-lucide="chevron-right" class="w-6 h-6"></i></button>
                        </div>
                    </div>

                    <!-- 橫向日期選擇 -->
                    <div class="flex overflow-x-auto hide-scrollbar gap-2 mb-6">
                        <button v-for="(day, index) in travelDays" :key="index"
                             @click="selectedDayIndex = index"
                             :class="['flex-shrink-0 px-4 py-2 rounded-full border text-sm font-bold transition-all whitespace-nowrap',
                                      selectedDayIndex === index ? 'bg-black text-white border-black shadow-lg' : 'bg-white text-zinc-400 border-zinc-200']">
                            D{{index + 1}} · {{ day.date }} ({{ day.week }})
                        </button>
                    </div>

                    <!-- 搜尋欄 -->
                    <div class="relative mb-6">
                        <i data-lucide="search" class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400"></i>
                        <input type="text" v-model="searchQuery" placeholder="搜尋：航班 / 車次 / 地點 / 時間" 
                               class="w-full bg-white border border-zinc-200 rounded-2xl py-3 pl-12 pr-4 focus:outline-none shadow-sm text-sm">
                        <div class="absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-zinc-300">共 {{ filteredItems.length }} 筆</div>
                    </div>

                    <!-- 行程列表 -->
                    <div class="space-y-4">
                        <div v-for="item in filteredItems" :key="item.id"
                             @click="handleCardClick(item)"
                             :class="['relative rounded-[28px] p-5 card-shadow transition-all active:scale-[0.97]',
                                      selectedCardId === item.id ? 'active-card' : 'bg-white text-zinc-900']">
                            
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex items-center gap-3">
                                    <div :class="['p-2 rounded-xl icon-bg', selectedCardId === item.id ? 'bg-white/20' : 'bg-zinc-100']">
                                        <i :data-lucide="getCategoryIcon(item.category)" class="w-5 h-5"></i>
                                    </div>
                                    <div class="text-[10px] font-black uppercase tracking-widest text-zinc-400">{{ item.category }}</div>
                                </div>
                                <div class="text-xs font-bold">{{ item.time }}</div>
                            </div>

                            <div class="ml-12">
                                <h3 class="text-lg font-black leading-tight">{{ item.name }}</h3>
                                <div class="text-xs font-medium mt-1 opacity-60">{{ item.place }}</div>
                            </div>

                            <div v-if="item.category === '航班'" class="absolute right-5 bottom-5 opacity-30">
                                <i data-lucide="chevron-right" class="w-4 h-4"></i>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 分頁 2: 資訊頁 (登機證 / 7人代碼) -->
                <section v-if="currentTab === 'info'" class="space-y-6">
                    <div class="bg-white rounded-[32px] p-1 shadow-2xl overflow-hidden border border-white">
                        <div class="bg-[#0c4a6e] p-6 text-white rounded-t-[32px]">
                            <h2 class="text-xl font-black flex items-center gap-2"><i data-lucide="ticket"></i> 登機證資訊</h2>
                            
                            <!-- 航段切換 -->
                            <div class="flex gap-2 mt-4">
                                <button v-for="(f, idx) in flights" :key="idx"
                                    @click="activeFlightIndex = idx"
                                    :class="['flex-1 py-2 rounded-xl text-[10px] font-black border transition-all',
                                             activeFlightIndex === idx ? 'bg-white text-[#0c4a6e] border-white shadow-lg' : 'bg-white/10 text-white border-white/20']">
                                    {{ f.no }}
                                </button>
                            </div>
                        </div>

                        <!-- 7人頁籤 -->
                        <div class="flex overflow-x-auto hide-scrollbar gap-2 p-4 bg-zinc-50 border-b">
                            <button v-for="p in people" :key="p.id"
                                @click="activePersonId = p.id"
                                :class="['flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold transition-all',
                                         activePersonId === p.id ? 'bg-black text-white shadow-md' : 'bg-white text-zinc-400 border']">
                                {{ p.name }}
                            </button>
                        </div>

                        <!-- 票券視覺 -->
                        <div class="p-6">
                            <div :class="['rounded-3xl p-6 text-white mb-6 shadow-2xl relative overflow-hidden', flights[activeFlightIndex].color]">
                                <div class="absolute right-[-20px] top-[-20px] opacity-10 rotate-12"><i data-lucide="plane" class="w-32 h-32"></i></div>
                                
                                <div class="flex justify-between items-center mb-8 relative z-10">
                                    <div class="text-2xl font-black italic">{{ flights[activeFlightIndex].no }}</div>
                                    <div class="bg-white/20 px-3 py-1 rounded-full text-[10px] font-bold">1/22 全員</div>
                                </div>

                                <div class="flex justify-between items-center relative z-10 border-b border-white/20 pb-6 mb-6">
                                    <div class="text-left">
                                        <div class="text-[10px] opacity-60 uppercase">From</div>
                                        <div class="text-4xl font-black">{{ flights[activeFlightIndex].from }}</div>
                                        <div class="text-sm font-bold">{{ flights[activeFlightIndex].depTime }}</div>
                                    </div>
                                    <div class="px-4"><i data-lucide="move-right" class="w-6 h-6 opacity-40"></i></div>
                                    <div class="text-right">
                                        <div class="text-[10px] opacity-60 uppercase">To</div>
                                        <div class="text-4xl font-black">{{ flights[activeFlightIndex].to }}</div>
                                        <div class="text-sm font-bold">{{ flights[activeFlightIndex].arrTime }}</div>
                                    </div>
                                </div>

                                <div class="flex justify-between items-end relative z-10">
                                    <div>
                                        <div class="text-[10px] opacity-60 uppercase">Passenger</div>
                                        <div class="text-lg font-black">{{ people.find(p=>p.id===activePersonId).name }}</div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-[10px] opacity-60 uppercase">PNR Code</div>
                                        <div class="text-2xl font-mono font-black tracking-tighter">{{ flights[activeFlightIndex].pnrGroup[activePersonId] }}</div>
                                    </div>
                                </div>
                            </div>

                            <!-- QR Code 區域 -->
                            <div class="text-center bg-zinc-50 p-6 rounded-[32px] border-2 border-dashed border-zinc-200">
                                <p class="text-[10px] font-black text-zinc-400 uppercase tracking-widest mb-4">Boarding QR Code</p>
                                <div class="bg-white p-4 rounded-2xl inline-block shadow-md">
                                    <img :src="`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${activePersonId}_${flights[activeFlightIndex].no}`" class="w-44 h-44">
                                </div>
                                <div v-if="flights[activeFlightIndex].notes" class="mt-6 p-4 bg-blue-50 text-blue-700 rounded-2xl text-xs text-left leading-relaxed">
                                    <i data-lucide="info" class="w-3 h-3 inline mr-1"></i> {{ flights[activeFlightIndex].notes }}
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- 底部導航 -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-xl border-t border-zinc-200 flex justify-around py-4 pb-10 z-50">
            <button v-for="tab in tabs" @click="currentTab = tab.id" :class="['flex flex-col items-center gap-1 transition-all', currentTab === tab.id ? 'text-black scale-110' : 'text-zinc-300']">
                <i :data-lucide="tab.icon" class="w-6 h-6"></i>
                <span class="text-[10px] font-black uppercase tracking-widest">{{ tab.label }}</span>
            </button>
        </nav>
    </div>

    <script>
        const { createApp, ref, onMounted, watch, computed } = Vue;

        createApp({
            setup() {
                const currentTab = ref('itinerary');
                const selectedDayIndex = ref(0);
                const activeFlightIndex = ref(0);
                const activePersonId = ref('p1');
                const selectedCardId = ref(101);
                const searchQuery = ref('');

                const tabs = [
                    { id: 'itinerary', label: '行程', icon: 'map-pin' },
                    { id: 'info', label: '資訊', icon: 'info' },
                    { id: 'shopping', label: '清單', icon: 'shopping-basket' },
                    { id: 'expenses', label: '花費', icon: 'banknote' }
                ];

                const travelDays = [
                    { date: '1/22', week: '四', title: '出發 / 抵達', dateLabel: 'D1 · 1/22 (四)' },
                    { date: '1/23', week: '五', title: '抵達 / 景點', dateLabel: 'D2 · 1/23 (五)' }
                ];

                const itineraryData = {
                    0: [
                        { id: 101, category: '航班', name: 'CX 451 桃園 → 香港', time: '19:40-21:45', place: 'TPE T1 → HKG T1' },
                        { id: 102, category: '航班', name: 'LX 139 香港 → 蘇黎世', time: '23:30-06:10+1', place: 'HKG T1 → ZRH' },
                        { id: 103, category: '夜宿', name: '夜宿：機上過夜', time: '夜宿', place: '機上' }
                    ]
                };

                const flights = [
                    { no: 'CX 451', from: 'TPE', to: 'HKG', depTime: '19:40', arrTime: '21:55', color: 'bg-[#006564]', pnrGroup: { p1: 'YSOGJD', p2: 'YSOGJD', p3: 'YSK5FZ', p4: 'YSPTBQ', p5: 'YSPTBQ', p6: 'YSK5FZ', p7: 'YSK5FZ' } },
                    { no: 'LX 139', from: 'HKG', to: 'ZRH', depTime: '23:30', arrTime: '06:10', color: 'bg-[#e30613]', notes: '長程航班，登機前記得上廁所、帶外套。', pnrGroup: { p1: 'YSOGJD', p2: 'YSOGJD', p3: 'YSK5FZ', p4: 'YSPTBQ', p5: 'YSPTBQ', p6: 'YSK5FZ', p7: 'YSK5FZ' } }
                ];

                const people = [
                    { id: 'p1', name: '林憲良' }, { id: 'p2', name: '陳慧敏' }, { id: 'p3', name: '陳慧美' }, 
                    { id: 'p4', name: '陳志宏' }, { id: 'p5', name: '陳淑蘭' }, { id: 'p6', name: '楊謦瑜' }, { id: 'p7', name: '楊謦寧' }
                ];

                const currentDay = computed(() => travelDays[selectedDayIndex.value]);
                const filteredItems = computed(() => {
                    const items = itineraryData[selectedDayIndex.value] || [];
                    if (!searchQuery.value) return items;
                    return items.filter(i => i.name.includes(searchQuery.value) || i.place.includes(searchQuery.value));
                });

                const handleCardClick = (item) => {
                    selectedCardId.value = item.id;
                    if (item.category === '航班') {
                        activeFlightIndex.value = item.name.includes('CX 451') ? 0 : 1;
                        currentTab.value = 'info';
                    }
                };

                const nextDay = () => { if (selectedDayIndex.value < travelDays.length - 1) selectedDayIndex.value++; };
                const prevDay = () => { if (selectedDayIndex.value > 0) selectedDayIndex.value--; };

                const getCategoryIcon = (cat) => cat === '航班' ? 'plane' : cat === '夜宿' ? 'hotel' : 'map-pin';

                onMounted(() => lucide.createIcons());
                watch([currentTab, selectedDayIndex, searchQuery, activeFlightIndex, activePersonId], () => {
                    setTimeout(() => lucide.createIcons(), 10);
                });

                return { currentTab, tabs, travelDays, selectedDayIndex, currentDay, searchQuery, filteredItems, selectedCardId, handleCardClick, nextDay, prevDay, getCategoryIcon, flights, activeFlightIndex, people, activePersonId };
            }
        }).mount('#app');
    </script>
</body>
</html>